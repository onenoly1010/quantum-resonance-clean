name: Documentation Reminder

on:
  pull_request:
    types: [opened]
    paths:
      - 'src/**'
      - 'ledger-api/**'
      - 'server/**'

jobs:
  docs-check:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
      issues: write
    steps:
      - name: Remind about docs
        uses: actions/github-script@v7
        with:
          script: |
            const isDependabot = context.payload.pull_request.user.login === 'dependabot[bot]';
            
            // Skip commenting on Dependabot PRs due to permission restrictions
            if (isDependabot) {
              console.log('Dependabot PR detected - skipping comment due to token restrictions');
              return;
            }
            
            await github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.payload.pull_request.number,
              body: 'ðŸ“š This PR modifies code. Consider if documentation updates are needed.\n\nThe Documentation Agent can help: see `.github/AGENTS/DOCUMENTATION_AGENT.md`'
            });
